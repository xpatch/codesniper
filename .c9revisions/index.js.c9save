{"ts":1385100934233,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"/*\n\n    ECT fast template with coffee script\n    \n    Hogan.js - Twitter template engine.\n    \n    http://expressjs.com/api.html#app.engine    \n    \n    \n    \nhttp://coffeescript.org/\nhttp://ectjs.com/\nhttps://github.com/visionmedia/consolidate.js\n\nhttps://github.com/RandomEtc/ejs-locals\nhttps://github.com/visionmedia/ejs/tree/master/examples\n\n\nhttps://github.com/chovy/express-template-demo\n\nhttp://stackoverflow.com/questions/12209607/using-layout-view-in-express-with-consolidate-and-mustache\n\n\n*/\n\n\nvar express = require('express');\nvar cons = require('consolidate');\nvar inspect = require('util').inspect;\nvar request = require('request');\n\n\nvar couchdb = { ip: '172.17.0.3', port: '5984', url: 'http://172.17.0.3:5984' };\n\n\nfunction clog( data ) { console.log( inspect( data, { colors: true, depth: null, showHidden: true }) ); }\n\n\nvar app = express();\n\napp.engine('html', cons.ect);\napp.set('view engine', 'html');\napp.set('views', __dirname + '/views');\napp.use(express.bodyParser());\napp.use(express.static('static'));\n\n\napp.get('/', function (req,res) {\n    res.render('add', {title:'Teh Title'} );\n});\n\n/*\napp.get('/', function (req,res) {\n    res.render('add', {title:'Teh Title'} );\n});\n*/\n\n\n\napp.post('/add', function (req,res) {\n  \n  var json_data = { src: req.body.src, filename: req.body.filename };\n  request.post({ uri: couchdb.url+'/codesniper', json: json_data }, function (err,res,body) {  \n    clog(err);\n    clog(body);\n      \n  });\n  \n  res.send(201); \n  \n});\n\n\n\nif( process.env.PORT ) { \n  console.log(\"Listening on \"+process.env.PORT);\n  app.listen(process.env.PORT);\n} else {\n  console.log(\"Listening on 8900\");\n  app.listen(8900);\n}\n\n"]],"start1":0,"start2":0,"length1":0,"length2":1665}]],"length":1665}
